{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Alex\\\\Desktop\\\\code\\\\reactproj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Alex\\\\Desktop\\\\code\\\\reactproj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Alex\\\\Desktop\\\\code\\\\reactproj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Alex\\\\Desktop\\\\code\\\\reactproj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Alex\\\\Desktop\\\\code\\\\reactproj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Alex\\\\Desktop\\\\code\\\\reactproj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import config from'../config.js';var axios=require('axios');var firebase=require('firebase');export var Add=/*#__PURE__*/function(_Component){_inherits(Add,_Component);var _super=_createSuper(Add);function Add(props){var _this;_classCallCheck(this,Add);_this=_super.call(this);_this.myFormHandler=function(event){event.preventDefault();var req='https://www.omdbapi.com/?apikey=885fb928&i='+_this.state.movId;_this.getMovieName(_assertThisInitialized(_this),req);};_this.inputHandler=function(event){var field=event.target.name;var value=event.target.value;_this.setState(_defineProperty({},field,value));};_this.state={movId:'',src:'',title:'',director:'',imdb:'',plot:''//movies: [],\n//shouldUpdate: false,\n};return _this;}_createClass(Add,[{key:\"componentDidMount\",value:function componentDidMount(){document.title='Add a Movie';if(!firebase.apps.length){firebase.initializeApp(config);}}},{key:\"updateDb\",value:function updateDb(obj){var formObj={name:obj.state.title,src:obj.state.src,director:obj.state.director,imdb:obj.state.imdb,plot:obj.state.plot};var ref=firebase.database().ref('movies');ref.once('value').then(function(snapshot){var movExists=snapshot.child(obj.state.movId).exists();if(movExists){alert('Movie has already been added.');}else{ref.child(obj.state.movId).set(formObj);alert('Movie successfully added!');}});}},{key:\"getMovieName\",value:function getMovieName(obj,req){axios.get(req).then(function(response){// handle success\nobj.setState({src:response.data.Poster,title:response.data.Title,director:response.data.Director,imdb:response.data.imdbRating,plot:response.data.Plot});//console.log(response.data);\n}).then(function(){obj.updateDb(obj);}).catch(function(error){// handle error\nconsole.log(error);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"add-box\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.myFormHandler},/*#__PURE__*/React.createElement(\"h2\",null,\"Add a Movie to the List\"),/*#__PURE__*/React.createElement(\"p\",null,\"IMDb movie ID:\"),/*#__PURE__*/React.createElement(\"input\",{name:\"movId\",type:\"text\",size:\"50\",required:true,onChange:this.inputHandler}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",id:\"submit\",name:\"submit\",value:\"Add Movie\"})));}}]);return Add;}(Component);export default Add;","map":{"version":3,"sources":["C:/Users/Alex/Desktop/code/reactproj/src/Components/Add.js"],"names":["React","Component","config","axios","require","firebase","Add","props","myFormHandler","event","preventDefault","req","state","movId","getMovieName","inputHandler","field","target","name","value","setState","src","title","director","imdb","plot","document","apps","length","initializeApp","obj","formObj","ref","database","once","then","snapshot","movExists","child","exists","alert","set","get","response","data","Poster","Title","Director","imdbRating","Plot","updateDb","catch","error","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport config from '../config.js';\nconst axios = require('axios');\nconst firebase = require('firebase')\n\nexport class Add extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      movId: '',\n      src: '',\n      title: '',\n      director: '',\n      imdb: '',\n      plot: '',\n      //movies: [],\n      //shouldUpdate: false,\n    }\n  }\n\n  componentDidMount(){\n    document.title = 'Add a Movie';\n    if (!firebase.apps.length) {\n      firebase.initializeApp(config);\n    }\n  }\n\n  myFormHandler = (event) => {\n    event.preventDefault();\n    let req = 'https://www.omdbapi.com/?apikey=885fb928&i='+this.state.movId;\n    this.getMovieName(this, req);\n  }\n\n  inputHandler = (event) => {\n    let field = event.target.name;\n    let value = event.target.value;\n    this.setState({[field]: value});\n  }\n\n  updateDb(obj) {\n    let formObj = {\n      name: obj.state.title,\n      src: obj.state.src,\n      director: obj.state.director,\n      imdb: obj.state.imdb,\n      plot: obj.state.plot,\n    };\n    let ref = firebase.database().ref('movies');\n    ref.once('value').then(function(snapshot) {\n      let movExists = snapshot.child(obj.state.movId).exists();\n      if(movExists) {\n        alert('Movie has already been added.');\n      } else {\n        ref.child(obj.state.movId).set(formObj);\n        alert('Movie successfully added!');\n      }\n    });\n  }\n\n  getMovieName(obj, req) {\n    axios.get(req)\n    .then(function (response) {\n      // handle success\n      obj.setState({\n        src: response.data.Poster,\n        title: response.data.Title,\n        director: response.data.Director,\n        imdb: response.data.imdbRating,\n        plot: response.data.Plot,\n      });\n      //console.log(response.data);\n    })\n    .then(function () {\n      obj.updateDb(obj);\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);\n    })\n  }\n\n  render() {\n    return(\n      <div id='add-box'>\n        <form onSubmit={this.myFormHandler}>\n          <h2>Add a Movie to the List</h2>\n          <p>IMDb movie ID:</p>\n          <input name='movId' type='text' size='50' required onChange={this.inputHandler}></input><br/><br/>\n          <input type='submit' id='submit' name='submit' value='Add Movie'></input>\n        </form>\n      </div>      \n    );\n  }\n}\nexport default Add;"]},"metadata":{},"sourceType":"module"}